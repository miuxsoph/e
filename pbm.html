<!DOCTYPE html>
<html>
<head>
    <title>PBM Generator</title>
</head>
<body>
    <h1>PBM Generator</h1>
    <form id="pbm-form">
        <label for="width">Width:</label>
        <input type="number" id="width" name="width" required><br>
        <label for="height">Height:</label>
        <input type="number" id="height" name="height" required><br>
        <label for="bitfield">Bitfield:</label>
        <textarea id="bitfield" name="bitfield" required></textarea><br>
        <input type="button" value="Generate PBM" onclick="generatePBM()">
    </form>

    <script>
        function generatePBM() {
            var width = document.getElementById('width').value;
            var height = document.getElementById('height').value;
            var bitfield = document.getElementById('bitfield').value;

            var header = 'P1\n' + '# Created by PBM Generator\n' + width + ' ' + height + '\n';
            var pbm = header + bitfield.replace(/(.{1})/g,"$1 ");

            var element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(pbm));
            element.setAttribute('download', 'image.pbm');

            element.style.display = 'none';
            document.body.appendChild(element);

            element.click();

            document.body.removeChild(element);
        }
    </script>
</body>
</html>
